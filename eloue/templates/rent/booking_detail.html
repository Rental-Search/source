{% extends "accounts/borrower_booking.html" %}
{% load i18n bookingaction %}


{% block owner_product %}
    {% if request.user == booking.owner %}selected-nav-bar-link{% endif %}
{% endblock %}
{% block borrower_booking %}
    {% if request.user == booking.borrower %}selected-nav-bar-link{% endif %}
{% endblock %}

{% block content-aside-profil %}
    {% if request.user == booking.borrower %}
        {% if booking.state == "authorized"%}{% url borrower_booking_authorized as return_url %}{% endif %}
        {% if booking.state == "pending"%}{% url borrower_booking_pending as return_url %}{% endif %}
        {% if booking.state == "ongoing"%}{% url borrower_booking_ongoing as return_url %}{% endif %}
        {% if booking.state != "authorized" and booking.state != "pending" and booking.state != "ongoing" %}
            {% url borrower_booking_history as return_url %}
        {% endif %}
    {% endif %}
    {% if return_url %}
        <div class="previous-sub-bar">
          &larr;  <a href="{{ return_url }}">{% trans "Retour aux réservations" %}</a>
        </div>
    {% endif %}
{% endblock %}

{% block content-main-profil %}
<table class="table table-bordered booking-resume">
                <tbody>
                <tr>
                    <th class="b-state">{{ booking.get_state_display }}</th>
                    <td><a href="{{booking.product.get_absolute_url}}" class="b-title">{{booking.product.summary|capfirst}}</a> <a href="{{booking.get_absolute_url}}" class="b-more">(Voir le détail)</a></td>
                </tr>
                <tr>
                    <th>{% trans "Début" %}</th>
                    <td class="align-center">{{booking.started_at|date:"l d F Y H:i"|capfirst}}</td>
                </tr> 
                    <th>{% trans "Fin" %}</th>
                    <td class="align-center">{{booking.ended_at|date:"l d F Y H:i"|capfirst}}</td>
                </tr>
                <tr>
                    <th>{% trans "Montant" %}</th>
                    <td class="align-center"><b>{{booking.total_amount}} &euro;</b></td>
                </tr>
                <tr class="b-action">
                    <td colspan="2">{% bookingaction request booking %}</td>
                </tr>
                </tbody>
            </table>

{% endblock %}