{% extends "base.html" %}
{% load i18n mptt_tags %}

{% block title %}{% trans "Mettre en location" %}{% endblock %}

{% block content %}
<div id="content" class="clearfix">
	<div class="sbs x12">
		<div class="sbs-header">
			<h1>{% trans "Mettre en location" %}</h1>
		</div>
		<ol class="sbs-steps">
			<li class="on">{% trans "1. Remplissez la fiche" %}</li>
			<li class="off">{% trans "2. Identifiez-vous" %}</li>
		</ol>
		<a href="{% url faq-topic-list %}" class="btn big-blue">{% trans "Obtenir de l'aide" %}</a>
	</div>
	<div class="content-header x12">
		<h2>{% trans "Remplissez le formulaire de location" %}</h2>
	</div>
	<div class="new x9">
		
		<form class="form" enctype="multipart/form-data" action="" method="POST">
		  {% csrf_token %}
			
			<table>
				<tr>
					<td colspan="2" {% if form.category.errors %} class="error-field" {% endif %}>
						{% full_tree_for_model products.Category as categories %}
						<select id="id_0-category" class="selm" name="0-category">
							{% if not form.category.data %}
								<option selected="selected">{{ form.category.field.empty_label }}</option>
							{% endif %}
						    {% for node,structure in categories|tree_info:"ancestors" %}
										{% if not node.is_root_node and not node.is_leaf_node %}
											<optgroup label="{{ node }}">
										{% endif %}
									{% if node.is_leaf_node %}
									<option value="{{ node.pk }}" {% if form.category.data == node.id %}selected="selected"{% endif %}>
										{{ node }}
									</option>
								{% endif %}
								{{ structure.closed_levels }}
								{% if structure.closed_levels|length_is:"1" %}
								</optgroup>
								{% endif %}
							{% endfor %}
						</select>
						{% if form.category.errors %}
					 		{% for error in form.category.errors %}
								<br />
						  	<span class="error">{{ error|escape }}</span>
							{% endfor %}
					{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.picture.label }} * :</label></th>
					<td {% if form.picture.errors %} class="error-field" {% endif %}>
					{{ form.picture }}
					{% if form.picture.errors %}
					{% for error in form.picture.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.summary.label }} {% if form.summary.field.required %}*{% endif %} :</label></th>
					<td {% if form.summary.errors %} class="error-field" {% endif %}>
						{{ form.summary }}
						{% if form.summary.errors %}
						    {% for error in form.summary.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.price.label }} {% if form.price.field.required %}*{% endif %} :</label></th>
					<td {% if form.price.errors %} class="error-field" {% endif %}>
						{{ form.price }} <span class="unit">&euro;</span> {% trans "par jour" %}
						{% if form.price.errors %}
						    {% for error in form.price.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.deposit_amount.label }} {% if form.deposit_amount.field.required %}*{% endif %} :</label></th>
					<td {% if form.deposit_amount.errors %} class="error-field" {% endif %}>
						{{  form.deposit_amount }} <span class="unit">&euro;</span>
						{% if form.deposit_amount.errors %}
						    {% for error in form.deposit_amount.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.quantity.label }} {% if form.quantity.field.required %}*{% endif %} :</label></th>
					<td {% if form.quantity.errors %} class="error-field" {% endif %}>
						{{  form.quantity }}
						{% if form.quantity.errors %}
						    {% for error in form.quantity.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
				<tr>
					<th><label>{{ form.description.label }} {% if form.description.field.required %}*{% endif %} :</label></th>
					<td {% if form.description.errors %} class="error-field" {% endif %}>
						{{ form.description}}
						{% if form.description.errors %}
						    {% for error in form.description.errors %}
										<br />
						        <span class="error">{{ error|escape }}</span>
						    {% endfor %}
						{% endif %}
					</td>
				</tr>
			</table>
			<p class="required-field">{% trans "* = champ obligatoire" %}</p>
		</div>
		<div class="submit-wizard x9">
			<a href="{% url home %}">{% trans "Annuler" %}</a> {% trans "ou" %} 
			<input type="submit" class="btn big-green" value="{% trans "Continuer &rarr;" %}" />
		</form>
		</div>
</div>{# content #}	
{% endblock %}