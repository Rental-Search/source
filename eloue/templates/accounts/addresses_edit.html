{% extends "base.html" %}
{% load i18n product paginator %}

{% block title %}{% trans "Votre profil" %}{% endblock %}

{% block content %}
<div id="content" class="xgrid">
       <div class="content-top">
         <ul id="menu" class="x12">
            <li class="menu-tab first"><a href="{% url dashboard %}">{% trans "Tableau de bord" %}</a></li>
			<li class="menu-tab"><a href="{% url owner_booking %}">{% trans "Propriétaire" %}</a></li>
			<li class="menu-tab"><a href="{% url borrower_booking %}">{% trans "Locataire" %}</a></li>
			<li class="menu-tab">{% trans "Mon compte" %}</li>
			<li class="menu-tab"><a href="{% url inbox %}">{% blocktrans %}Messages({{ unread_message_count }}){% endblocktrans %}</a></li>
		 </ul>
	    </div>
	    <div id="sub-menu">
	        <ul class="x12">
	            <li class="sub-tab first"><a href="{% url patron_edit %}">{% trans "Votre profil" %}</a></li>
		    <li class="sub-tab"><a href="{% url patron_edit_password %}">{% trans "Modification du mot de passe" %}</a></li>
		    <li class="sub-tab"><a href="{% url patron_edit_phonenumber %}">{% trans "Modification des numéros de téléphone" %}</a></li>
		    <li class="sub-tab">{% trans "Modification des adresses" %}</li>
	        </ul>
	    </div>
	    <div class="x8 p2">
	    {% if form.is_multipart %}
	    <form enctype="multipart/form-data" method="post" action="">
		{% else %}
	    <form method="post" action="">
		{% endif %}
	    		{% csrf_token %}
	    		{{formset.management_form}}
	    		{% for form in formset.forms %}
	    		{{form.id}}
	    		<table class="more-info">
    		<tr class = "add_new_addr">
    			<th rowspan="3" class="new-address">
    				<label>
    					{% if forloop.last %}
    						{% trans "Nouvelle adresse :" %}
    					{% else %}
    						{% trans "Adresse" %} * :
    					{% endif %}
    				</label>
    				{% if not forloop.last %}
			    		supprimer: {{form.DELETE}}
			    	{% endif %}
    			</th>
    			<td  class="street-field {% if form.addresses__address1.errors %}error-field{% endif %}">
    				{{ form.address1 }}
    				{% if form.address1.errors %}
    				    {% for error in form.address1.errors %}
    								<br />
    				        <span class="error">{{ error|escape }}</span>
    				    {% endfor %}
    				{% endif %}
    			</td>
    		</tr>
    		<tr class = "add_new_addr">
    			<td>
    				<span {% if form.zipcode.errors %} class="error-field" {% endif %}>
    					{{ form.zipcode }}
    				</span>
    				<span {% if form.city.errors %} class="error-field" {% endif %}>
    					{{ form.city }}
    				</span>
    				{% if form.zipcode.errors%}
    				    {% for error in form.zipcode.errors %}
    								<br />
    				        <span class="error">{{ error|escape }}</span>
    				    {% endfor %}
    				{% endif %}
    				{% if form.city.errors %}
    				    {% for error in form.city.errors %}									
    				        <span class="error">{{ error|escape }}</span>
    				    {% endfor %}
    				{% endif %}
    				{{form.non_field_errors}}
    			</td>
    		</tr>
    		<tr class = "add_new_addr">
    			<td  class="country-field {% if form.country.errors %}error-field {% endif %}" >
    				{{ form.country }}
    				{% if form.country.errors %}
    				    {% for error in form.country.errors %}
    								<br />
    				        <span class="error">{{ error|escape }}</span>
    				    {% endfor %}
    				{% endif %}
    			</td>
    		</tr>
	    		{% endfor %}
	    		</table>
	    {{formset.non_form_errors}}
	    </div>
	    <div id="submit-wizard" class="x12">
	         <p>
	    		<a href="{% url home %}">{% trans "Annuler" %}</a> {% trans "ou" %}
	    		<input type="submit" class="btn big-green" value={% trans "Sauvegarder" %} />
	    	</p>
	    </div>
</div>
{% endblock %}